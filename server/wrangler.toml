name = "api"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

[dev]
port = 3001
local_protocol = "http"

[vars]
NODE_ENV = "development"
CORS_ORIGINS = "http://localhost:3000,http://localhost:5173"
LOG_LEVEL = "info"
BETTER_AUTH_URL = "http://localhost:3001"

# ============================================
# Secrets (set via `wrangler secret put`)
# ============================================
# BETTER_AUTH_SECRET - run: wrangler secret put BETTER_AUTH_SECRET
# DATABASE_URL - run: wrangler secret put DATABASE_URL (for local dev without Hyperdrive)

# ============================================
# Hyperdrive - PostgreSQL (production)
# ============================================
# 1. Create Hyperdrive config:
#    wrangler hyperdrive create my-hyperdrive --connection-string="postgresql://user:pass@host:5432/db"
# 2. Uncomment below and add the ID:
#
# [[hyperdrive]]
# binding = "HYPERDRIVE"
# id = "xxxxxxxx"

# ============================================
# R2 Storage (production)
# ============================================
# 1. Create R2 bucket:
#    wrangler r2 bucket create my-app-storage
# 2. Uncomment below and update bucket name:
#
[[r2_buckets]]
binding = "STORAGE"
bucket_name = "my-app-storage"
# preview_bucket_name = "my-app-storage-preview"

# Optional: Public R2 URL (if bucket is public)
# R2_PUBLIC_URL = "https://pub-xxx.r2.dev"

# ============================================
# KV Namespace (uncomment to enable)
# ============================================
# [[kv_namespaces]]
# binding = "CACHE"
# id = "xxxxxxxx"
# preview_id = "xxxxxxxx"
